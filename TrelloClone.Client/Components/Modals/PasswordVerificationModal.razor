@using System.ComponentModel.DataAnnotations

<FormModal Show="@Show" 
           Title="@Title" 
           Model="@PasswordModel" 
           OnCancel="@OnCancel" 
           OnSubmit="@OnSubmit"
           IsSubmitting="@IsSubmitting" 
           SubmitText="@ConfirmText"
           CancelText="Cancel">
    @if (!string.IsNullOrEmpty(Message))
    {
        <p class="text-muted mb-3">@Message</p>
    }
    @if (!string.IsNullOrEmpty(ErrorMessage))
    {
        <div class="alert alert-danger mb-3">
            <i class="bi bi-exclamation-circle"></i> @ErrorMessage
        </div>
    }
    <div class="mb-3">
        <label for="password" class="form-label">Password</label>
        <InputText id="password" 
                   type="password" 
                   class="form-control" 
                   @bind-Value="PasswordModel.Password" 
                   placeholder="Enter your password" />
    </div>
</FormModal>

@code {
    [Parameter] public bool Show { get; set; }
    [Parameter] public string Title { get; set; } = "Verify Password";
    [Parameter] public string Message { get; set; } = string.Empty;
    [Parameter] public string ConfirmText { get; set; } = "Confirm";
    [Parameter] public string ErrorMessage { get; set; } = string.Empty;
    [Parameter] public EventCallback OnCancel { get; set; }
    [Parameter] public EventCallback<EditContext> OnSubmit { get; set; }
    [Parameter] public bool IsSubmitting { get; set; }

    public PasswordVerification PasswordModel { get; set; } = new();

    protected override void OnParametersSet()
    {
        if (!Show)
        {
            PasswordModel = new PasswordVerification();
        }
    }

    public class PasswordVerification
    {
        [Required(ErrorMessage = "Password is required")]
        public string Password { get; set; } = string.Empty;
    }
}